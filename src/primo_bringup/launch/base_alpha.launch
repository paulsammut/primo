<?xml version="1.0"?>
<launch>

    <arg name="rtab"        value="true"/>
    <arg name="nav"         value="true"/>
    <arg name="stereo_cams" value="false"/>
    <arg name="joy"         value="true"/>

    <include file="$(find primo_description)/launch/primo_urdf_real.launch"/>
    <include file="$(find primo_base)/launch/ard_enc.launch"/>

    <include if="$(arg joy)" file="$(find primo_base)/launch/joy_twist.launch"/>

    <include file="$(find primo_base)/launch/diff_drive.launch">
        <arg name="PID"         value="true"/>
        <arg name="twist"       value="true"/>
        <arg name="publish_tf"  value="false"/>
    </include>

    <include file="$(find primo_base)/launch/vel_smooth.launch"/>

    <node pkg="sabertooth_simple" type="sabertooth_simple" name="sabertooth"/>

    <!-- <include file="$(find primo_base)/launch/power_sensor.launch"/> -->

    <!-- Estop -->
    <node pkg="sound_play" type="soundplay_node.py" name="soundplay"/>

    <node pkg="primo_base" type="joy_estop" name="estop" output="screen"/>

    <group if="$(arg stereo_cams)">
        <include file="$(find primo_stereo)/launch/stereo0.launch">
            <arg name="stereo_real" value="true"/>
        </include>

        <include file="$(find primo_stereo)/launch/stereo1.launch">
            <arg name="stereo_real" value="true"/>
        </include>
    </group>
    
    <include if="$(arg nav)" file="$(find primo_nav)/launch/primo_nav.launch"/>

    <include file="$(find primo_bringup)/launch/localization.launch"/> 

</launch>
