<?xml version="1.0"?>
<launch>

    <arg name="rviz" default="false"/>
    <arg name="rtab_viz_stereo" default="false"/>
    <arg name="rtab_viz_rgbd"   default="false"/>
      
    <!-- Visualisation RTAB-Map RGBD -->
    <node if="$(arg rtab_viz_rgbd)" pkg="rtabmap_ros" type="rtabmapviz" name="rtabmapviz_rgbd" 
      args="-d $(find rtabmap_ros)/launch/config/rgbd_gui.ini" output="screen">

	    <param name="subscribe_rgbd"        type="bool"     value="true"/>
	    <param name="subscribe_stereo"      type="bool"     value="false"/>
	    <param name="subscribe_odom_info"   type="bool"     value="false"/>
        <param name="stereo_approx_sync"    type="bool"     value="true"/>
	    <param name="queue_size"            type="int"      value="10"/>
	    <param name="frame_id"              type="string"   value="base_link"/>

	    <remap from="left/image_rect"       to="/stereo1/left/image_rect_color"/>
	    <remap from="right/image_rect"      to="/stereo1/right/image_rect"/>
	    <remap from="left/camera_info"      to="/stereo1/left/camera_info"/>
	    <remap from="right/camera_info"     to="/stereo1/right/camera_info"/>
	    <remap from="odom_info"             to="/odom_info"/>
	    <remap from="odom"                  to="/odom"/>


	    <remap from="odom"                  to="/odom"/>
        <remap from="rgbd_image"            to="/stereo1/left/image_rect"/>
        <remap from="depth/image"           to="/stereo1/depth"/>
        <remap from="rgb/camera_info"       to="/stereo1/left/camera_info"/>
    </node>
    
    <!-- Visualisation RTAB-Map with a Stereo feed-->
    <node if="$(arg rtab_viz_stereo)" pkg="rtabmap_ros" type="rtabmapviz" name="rtabmapviz_stereo" 
      args="-d $(find rtabmap_ros)/launch/config/rgbd_gui.ini" output="screen">

	    <param name="subscribe_stereo"      type="bool"     value="true"/>
	    <param name="subscribe_odom_info"   type="bool"     value="false"/>
        <param name="stereo_approx_sync"    type="bool"     value="true"/>
	    <param name="queue_size"            type="int"      value="10"/>
	    <param name="frame_id"              type="string"   value="base_link"/>

	    <remap from="left/image_rect"       to="/stereo1/left/image_rect_color"/>
	    <remap from="right/image_rect"      to="/stereo1/right/image_rect"/>
	    <remap from="left/camera_info"      to="/stereo1/left/camera_info"/>
	    <remap from="right/camera_info"     to="/stereo1/right/camera_info"/>
	    <remap from="odom_info"             to="/odom_info"/>
	    <remap from="odom"                  to="/odom"/>

    </node>

  	<!-- Visualisation RVIZ -->
    <node if="$(arg rviz)" pkg="rviz" type="rviz" name="rviz" args="-d $(find primo_rtabmap)/rviz/rtabmap.rviz" />

</launch>
